var inputarray=[],outputarray=[],degradedarr=[],nodegradearr=[],partlydegradedarr=[];function degraded(data){for(var temp=[],i=0;i<data.length-3;i++){var tempobj={type:data[i].type,area:data[i].area};temp.push(tempobj)}return temp}function nodegrade(data){for(var i in data)if("No Apparent Degradation"==data[i].type)return data[i]}function partlydegraded(data){var totaldegradedarea,degradepercent,nodegrade;for(var i in data)"Total Area under Desertification"==data[i].type&&(totaldegradedarea=data[i].area),"Total Area under"==data[i].type&&(degradepercent=data[i].area),"No Apparent Degradation"==data[i].type&&(nodegrade=data[i].area);var partialde=100*totaldegradedarea/degradepercent-nodegrade-totaldegradedarea,temp;return console.log(totaldegradedarea+nodegrade+partialde),{type:"Partial Degradation",area:partialde}}function finalarrayobj(state,degrade,nodegrade,partdegrade){var temp;return{State:state,Data:[{type:"Degraded",Data:degrade},{type:"Partially Degraded",Data:[partdegrade]},{type:"No Degrade",Data:[nodegrade]}]}}function sorter(){for(var i in inputarray)console.log(inputarray[i].State),degradedarr=degraded(inputarray[i].Data),nodegradearr=nodegrade(inputarray[i].Data),partlydegradedarr=partlydegraded(inputarray[i].Data),outputarray.push(finalarrayobj(inputarray[i].State,degradedarr,nodegradearr,partlydegradedarr));console.log(JSON.stringify(outputarray))}$.getJSON("Data/Degradation-by-type-2003-05.json",(function(data){inputarray=data,sorter()}));